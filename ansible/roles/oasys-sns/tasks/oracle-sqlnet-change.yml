---
- name: Check sqlnet.ora file exists
  ansible.builtin.stat:
    path: "{{ oracle_home }}/network/admin/sqlnet.ora"
  register: sqlnet_file

- name: Copy sqlnet.ora from template
  become_user: oracle
  ansible.builtin.template:
    src: "sqlnet.ora.j2"
    dest: "{{ stage }}/sqlnet.ora"
    mode: u=rwx,g=r,o=r
    owner: "{{ oracle_install_user }}"
    group: "{{ oracle_install_group }}"
  when: not sqlnet_file.stat.exists
