---
- name: copy collectd config
  ansible.builtin.template:
    src: "collectd.conf.j2"
    dest: "/etc/collectd.d/{{ collectd_script_name }}.conf"
    owner: root
    mode: 0644
  notify:
    - restart collectd

- name: copy collectd plugin script
  ansible.builtin.template:
    src: "{{ collectd_script_name }}.sh.j2"
    dest: "/usr/local/bin/{{ collectd_script_name }}.sh"
    owner: root
    mode: 0755
  notify:
    - restart plugin script
