---
- name: Check if product is installed
  stat:
    path: /u01/app/bobj/BIP4/sap_bobj
  register: bip_installed_check

- name: Install BIP
  block:
    - name: Perform pre-requesite checks
      become_user: bobj
      ansible.builtin.shell: "/u02/software/BIP_4_3_SP1/setup.sh -InstallDir /u01/app/bobj/BIP4/ -pre_requisite_check /u02/software/BIP_4_3_SP1/prereq_checks.ini /u02/software/BIP_4_3_SP1/failedPrereqs.txt"

    - name: Run Silent Installation
      become_user: bobj
      ansible.builtin.shell: |
        . ~/.bash_profile 
        /u02/software/BIP_4_3_SP1/setup.sh -InstallDir /u01/app/bobj/BIP4/ -r /u02/software/BIP_4_3_SP1/bip_response.ini
  when: not bip_installed_check.stat.exists
