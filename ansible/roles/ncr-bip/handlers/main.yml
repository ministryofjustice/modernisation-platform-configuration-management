---
- name: Redeploy Web
  become_user: bobj
  args:
    chdir: "{{ sap_bip_installation_directory }}/sap_bobj/enterprise_xi40/wdeploy"
  ansible.builtin.shell: |
    main() {
      . ~/.bash_profile
      echo "wdeploy.sh tomcat9 undeployall"
      ./wdeploy.sh tomcat9 undeployall
      echo "wdeploy.sh tomcat9 deployall"
      ./wdeploy.sh tomcat9 deployall
     }
     main | logger -p local3.info -t ansible-ncr-bip

- name: Restart Web
  ansible.builtin.shell: |
    main() {
      echo "/etc/init.d/SAPBOBJEnterpriseXI40 stop"
      /etc/init.d/SAPBOBJEnterpriseXI40 stop
      echo "/etc/init.d/SAPBOBJEnterpriseXI40 start"
      /etc/init.d/SAPBOBJEnterpriseXI40 start
    }
    main | logger -p local3.info -t ansible-ncr-bip
