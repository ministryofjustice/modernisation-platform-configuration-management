- name: Get EC2 Metadata Facts
  amazon.aws.ec2_metadata_facts:

- name: Retrieve EC2 Tags
  amazon.aws.ec2_tag_info:
    region: "{{ ansible_ec2_placement_region }}"
    resource: "{{ ansible_ec2_instance_id }}"
  register: ec2

- name: Dump Variables
  vars:
    msg: |
      Module Variables ("vars"):
      --------------------------------
      {{ vars | to_nice_json }}

      Environment Variables ("environment"):
      --------------------------------
      {{ environment | to_nice_json }}

      GROUP NAMES Variables ("group_names"):
      --------------------------------
      {{ group_names | to_nice_json }}

      GROUPS Variables ("groups"):
      --------------------------------
      {{ groups | to_nice_json }}

      HOST Variables ("hostvars"):
      --------------------------------
      {{ hostvars | to_nice_json }}

  debug:
    msg: "{{ msg.split('\n') }}"
  when: false
