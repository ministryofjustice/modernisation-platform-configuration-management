---

- name: create dirs
  file:
    path: "/home/oracle/admin/scripts"
    state: directory
    mode: 0755
    owner: "{{ ords_install_user }}"
    group: "{{ ords_install_group }}"
    recurse: true

- name: add startup and shutdown scripts
  template:
    src: "{{ item }}.j2"
    dest: "/home/{{ ords_install_user }}/admin/scripts/{{ item }}"
    owner: "{{ ords_install_user }}"
    group: "{{ ords_install_group }}"
    mode: 0755
  loop:
    - tomcat_startup_service.sh
    - tomcat_shutdown_service.sh

- name: systemd unit file for tomcat
  template:
    src: tomcat.service.j2
    dest: /etc/systemd/system/tomcat.service

- name: enable tomcat
  systemd:
    name: "tomcat"
    daemon_reload: yes
    enabled: yes
