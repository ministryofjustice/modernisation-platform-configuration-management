---
- name: stop nomis weblogic app
  ansible.builtin.service:
    name: "{{ item }}"
    state: stopped
  loop:
    - opmn
    - WLS_FORMS
    - WLS_REPORTS
    - WLS_FORMS1A
    - WLS_FORMS1B
    - WLS_FORMS1C
    - WLS_AUTOLOGOFF
    - WLS_TAGSAR
    - WLS_HOTPAGE

- name: Kill frmweb processes not stopped
  ansible.builtin.shell: |
    if [`ps -fu oracle | grep "frmweb webfile" | grep -v grep | gawk '{print $2}'| wc -l` -gt 0 ]
    then   
      ps -fu oracle | grep "frmweb webfile" | grep -v grep | gawk '{print $2}' | xargs kill -9
    fi
