---
- name: Copy systemd unit file for weblogic
  ansible.builtin.template:
    src: "10.3/{{ item }}"
    dest: "{{ item }}"
  loop:
    - /etc/systemd/system/wls_nodemanager.service
    - /etc/systemd/system/wls_adminserver.service
    - /etc/systemd/system/wls_managedserver.service

- name: Enable weblogic services
  ansible.builtin.systemd:
    name: "{{ item }}"
    daemon_reload: yes
    enabled: yes
  loop:
    - wls_nodemanager
    - wls_adminserver
    - wls_managedserver

- name: Start weblogic services
  ansible.builtin.systemd:
    name: "{{ item }}"
    state: "started"
  loop:
    - wls_nodemanager
    - wls_adminserver
    - wls_managedserver
  async: 3600
  poll: 60
