#!/bin/bash
# GoldenGate Audit Data Extract Start Script
# Generated by Ansible

GGHOME={{ oracle_goldengate_home }}
EXTRACT_NAME={{ oracle_goldengate_group.auditdata.extract_name }}
LOG={{ oracle_goldengate_log_dir }}/start_{{ oracle_goldengate_group.auditdata.extract_name }}_$(date +%Y%m%d_%H%M%S).log

cd ${GGHOME}

echo "Starting Extract ${EXTRACT_NAME}..."

./ggsci << EOF >"$LOG" 2>&1
START EXTRACT ${EXTRACT_NAME}
INFO EXTRACT ${EXTRACT_NAME}
EXIT
EOF

if [ $? -eq 0 ]; then
    echo "Extract ${EXTRACT_NAME} started successfully"
    exit 0
else
    echo "Failed to start Extract ${EXTRACT_NAME}"
    exit 1
fi
