---
ansible_python_interpreter: /usr/local/bin/python3.6

# NOTE: test environment uses different values from production and preproduction, defaults are 502 and 501 for group dba and user oracle. For some reason 't2' uses 503 and 502.
users_and_groups_system:
  - group: dba
    gid: "{{ (ec2.tags['environment-name'] == 'oasys-national-reporting-test') | ternary('503', '502') }}"
  - group: wheel
    gid: 10
  - group: oinstall
    gid: "{{ (ec2.tags['environment-name'] == 'oasys-national-reporting-test') | ternary('502', '501') }}"
  - name: oracle
    group: oinstall
    uid: "{{ (ec2.tags['environment-name'] == 'oasys-national-reporting-test') | ternary('502', '501') }}"
    groups:
      - dba
      - wheel
  - name: bobj
    group: binstall
    uid: 1201
    groups:
      - dba
      - sapsys

server_type_roles_list:
  - users-and-groups
  - sudoers
  - get-ec2-facts
  - set-ec2-hostname
  - domain-search
  - disable-ipv6
  - disable-firewall
  - time
  - packages
  - message-of-the-day
  - amazon-ssm-agent
  - amazon-cli
  - ansible-script
  - epel
  - disks
  - oracle-12c-client # use 12c client because the 11g client isn't technically supported by Rhel 6
  - oracle-tns-entries
  - onr-boe
  # - collectd TODO: comment these back in, not needed yet
  # - amazon-cloudwatch-agent
  # - amazon-cloudwatch-agent-collectd
  # - collectd-service-metrics TODO: not defined yet

roles_list: "{{ (ami_roles_list | default([]) | difference(server_type_roles_list | default([]))) + (server_type_roles_list | default([])) }}"

packages_yum_install:
  - nano
  - vim
  - make
  - libstdc++.i686
  - libstdc++.x86_64
  - glibc.i686
  - glibc.x86_64
  - libX11.i686
  - libX11.x86_64
  - libXext.i686
  - libXext.x86_64
  - expat.i686
  - expat.x86_64
  # - libxcrypt.i686 removed from list as package is not available in RHEL 6
  - libgcc.i686
  - libgcc.x86_64
  # - libnsl.i686 removed from list as package is not available in RHEL 6
  - libXcursor.i686
  - libXcursor.x86_64
  - libXrender.i686
  - libXrender.x86_64
  - libXfixes.i686
  - libXfixes.x86_64
  - libxcb.i686
  - libxcb.x86_64
  - libXau.i686
  - libXau.x86_64
  - xz-libs.i686
  - compat-libstdc++-33-3.2.3-69.el6.i686
  - libXext-devel-1.3.3-1.el6.i686 # libXext-devel-1.1-3.el6.i686 <== FIXME: need this but supplying different version

  # oracle 12c client packages
  # - bc
  # - binutils-2.20.51.0.2-5.36.el6.x86_64
  # - compat-libcap1-1.10-1.x86_64
  # - compat-libstdc++-33-3.2.3-69.el6.x86_64
  # - compat-libstdc++-33-3.2.3-69.el6.i686
  # - e2fsprogs-1.41.12-14.el6.x86_64
  # - e2fsprogs-libs-1.41.12-14.el6.x86_64
  # - glibc.i686
  # - glibc.x86_64
  # - glibc-devel.i686
  # - glibc-devel.x86_64
  # - ksh
  # - libaio-0.3.107-10.el6.x86_64
  # - libaio-0.3.107-10.el6.i686
  # - libaio-devel-0.3.107-10.el6.x86_64
  # - libaio-devel-0.3.107-10.el6.i686
  # - libX11-1.5.0-4.el6.i686
  # - libX11-1.5.0-4.el6.x86_64
  # - libXau-1.0.6-4.el6.i686
  # - libXau-1.0.6-4.el6.x86_64
  # - libXi.i686
  # - libXi.x86_64
  # - libXtst.i686
  # - libXtst.x86_64
  # - libgcc-4.4.7-3.el6.i686
  # - libgcc-4.4.7-3.el6.x86_64
  # - libstdc++.i686
  # - libstdc++.x86_64
  # - libstdc++-devel.i686
  # - libstdc++-devel.x86_64
  # - libxcb-1.8.1-1.el6.i686
  # - libxcb-1.8.1-1.el6.x86_64
  # - libXrender.i686
  # - libXrender.x86_64
  # - libXrender-devel.i686
  # - libXrender-devel.x86_64
  # - make-3.81-20.el6.x86_64
  # - net-tools-1.60-110.el6_2.x86_64
  # - nfs-utils-1.2.3-36.el6.x86_64
  # - smartmontools-5.43-1.el6.x86_64
  # - sysstat-9.0.4-20.el6.x86_64


disks_mount:
  - ebs_device_name: /dev/sdb
    dir: /u01
    fstype: ext4
  - ebs_device_name: /dev/sdc
    dir: /u02
    fstype: ext4
  - ebs_device_name: /dev/sds
    dir: swap
    fstype: swap

# oracle client
oracle_install_user: oracle
oracle_install_group: oinstall
oracle_home: /u01/app/oracle/product/12.2.0/client_1
oracle_inventory: /u01/app/oraInventory

tns_entries:
  t2:
    - name: T2BOSYS
      port: 1521
      host_list:
        - t2-onr-db-a.oasys.hmpps-test.modernisation-platform.service.justice.gov.uk
      service_name: BOSYS_TAF
    - name: T2BOAUD
      port: 1521
      host_list:
        - t2-onr-db-a.oasys.hmpps-test.modernisation-platform.service.justice.gov.uk
      service_name: BOAUD_TAF
